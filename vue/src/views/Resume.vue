<template>
    <div class="container flipper">
        <div
            class="front resume"
            @mousemove="handleMouseMove"
            ref="frontOfResumeRef"
        >
            <header class="resume-header">
                <div class="header-profile-info">
                    <svg
                        version="1.0"
                        xmlns="http://www.w3.org/2000/svg"
                        width="200.000000pt"
                        height="41.000000pt"
                        viewBox="0 0 200.000000 41.000000"
                        preserveAspectRatio="xMidYMid meet"
                        class="main-logo"
                    >
                        <g
                            transform="translate(0.000000,41.000000) scale(0.010000,-0.009557)"
                            stroke="#4e54c8"
                            fill="none"
                            stroke-width="50"
                        >
                            <path
                                class="path"
                                d="M686 4268 c-7 -13 -154 -279 -326 -593 -172 -313 -321 -584 -331
                                -602 l-19 -31 1286 -1484 c708 -815 1303 -1499 1323 -1519 l36 -37 1317 1519
                                1318 1519 -343 623 -342 622 -1952 3 -1953 2 -14 -22z m1499 -346 c-22 -22
                                -170 -157 -330 -302 -159 -145 -302 -274 -316 -287 l-26 -24 -139 317 c-76
                                175 -140 321 -142 326 -2 4 221 8 495 8 l498 0 -40 -38z m1883 29 c-1 -4 -66
                                -151 -142 -325 l-139 -317 -26 24 c-14 13 -159 144 -321 292 -162 147 -311
                                283 -330 301 l-35 34 499 0 c274 0 496 -4 494 -9z m732 -713 c0 -5 -153 -8
                                -340 -8 -187 0 -340 4 -340 8 0 5 61 147 136 318 74 170 142 324 150 343 l15
                                35 189 -345 c104 -189 190 -347 190 -351z m-3763 337 l151 -345 -344 0 c-189
                                0 -344 3 -344 6 0 11 373 684 379 684 4 0 75 -155 158 -345z m1805 148 c101
                                -92 263 -241 361 -330 l177 -163 -730 0 -730 0 361 330 c198 182 365 330 369
                                330 5 0 91 -75 192 -167z m-1170 -1598 c186 -424 360 -822 388 -885 28 -63 47
                                -110 42 -105 -67 74 -1522 1756 -1522 1760 0 3 170 4 377 3 l377 -3 338 -770z
                                m1671 173 c-145 -332 -359 -820 -475 -1085 -116 -266 -214 -483 -218 -483 -6
                                0 -950 2149 -950 2163 0 4 429 7 954 7 l954 0 -265 -602z m1377 597 c0 -5
                                -1491 -1728 -1523 -1760 -6 -6 -6 -2 1 10 5 11 170 385 365 830 195 446 366
                                836 380 868 l26 57 375 0 c207 0 376 -2 376 -5z"
                            />
                            <path
                                class="path"
                                d="M5780 4258 c-11 -18 -24 -55 -30 -83 -7 -34 -9 -698 -8 -2060 l3
                                -2010 25 -50 c24 -47 27 -50 65 -50 38 0 41 3 65 50 l25 50 0 2040 0 2040 -25
                                50 c-23 45 -29 50 -62 53 -33 3 -40 -1 -58 -30z"
                            />
                            <path
                                class="path"
                                d="M7165 4158 c-3 -7 -129 -373 -281 -813 -152 -440 -285 -821 -296
                                -847 -27 -63 -56 -87 -135 -114 -66 -22 -68 -24 -71 -58 l-3 -36 221 0 221 0
                                -3 37 c-3 32 -7 38 -43 50 -21 7 -50 23 -63 36 -34 32 -27 76 48 295 l63 182
                                306 0 306 0 64 -192 c35 -105 64 -209 64 -230 0 -47 -21 -72 -79 -94 -40 -15
                                -44 -20 -44 -50 l0 -34 360 0 360 0 0 34 c0 31 -4 36 -37 46 -54 17 -100 55
                                -121 98 -11 20 -147 412 -303 869 l-284 833 -123 0 c-89 0 -124 -3 -127 -12z
                                m111 -771 l131 -402 -139 -3 c-76 -1 -200 -1 -276 0 l-138 3 141 407 c77 223
                                142 404 145 402 3 -3 64 -186 136 -407z"
                            />
                            <path
                                class="path"
                                d="M8250 4128 c0 -30 5 -35 63 -63 51 -25 64 -36 74 -65 15 -45 18
                                -1477 3 -1529 -13 -48 -44 -77 -96 -91 -42 -12 -44 -14 -44 -51 l0 -39 200 0
                                200 0 0 38 c0 36 -2 38 -52 57 -90 35 -85 -10 -91 765 -3 371 -2 668 2 660 4
                                -8 138 -354 297 -768 l289 -753 83 3 84 3 281 777 c154 428 281 777 281 775 1
                                -1 -1 -319 -4 -705 l-5 -704 -28 -24 c-15 -13 -45 -29 -67 -35 -38 -11 -40
                                -14 -40 -51 l0 -38 345 0 345 0 0 40 c0 22 -5 40 -10 40 -6 0 -30 9 -54 21
                                -30 14 -48 30 -58 52 -10 26 -13 177 -13 787 0 857 -6 798 82 840 48 23 53 28
                                53 58 l0 32 -278 0 -279 0 -244 -675 c-134 -370 -247 -671 -251 -667 -5 5
                                -383 980 -500 1290 l-19 52 -275 0 -274 0 0 -32z"
                            />
                            <path
                                class="path"
                                d="M10492 4129 c3 -28 9 -34 56 -51 99 -37 92 30 92 -848 0 -592 -3
                                -771 -13 -790 -11 -22 -72 -60 -119 -74 -13 -4 -18 -16 -18 -41 l0 -35 360 0
                                360 0 0 35 c0 25 -5 37 -17 41 -59 19 -98 42 -114 69 -18 28 -19 68 -19 795 0
                                878 -7 811 92 848 47 17 53 23 56 51 l3 31 -361 0 -361 0 3 -31z"
                            />
                            <path
                                class="path"
                                d="M11330 4127 c0 -30 4 -36 28 -42 55 -14 90 -37 104 -68 10 -26 13
                                -178 13 -792 0 -870 6 -808 -87 -843 -49 -18 -53 -22 -56 -56 l-3 -36 356 0
                                356 0 -3 37 c-3 32 -7 38 -43 50 -62 21 -82 33 -96 62 -9 19 -14 119 -17 379
                                l-4 352 99 0 100 0 209 -440 209 -439 253 -1 252 0 0 35 c0 32 -3 35 -42 46
                                -52 13 -109 53 -136 94 -11 16 -106 196 -210 400 l-190 369 62 26 c132 56 226
                                142 284 260 36 71 37 78 37 180 0 98 -2 110 -32 173 -43 91 -112 156 -216 206
                                -158 75 -152 74 -719 79 l-508 3 0 -34z m861 -77 c113 -35 177 -109 204 -236
                                42 -198 -6 -401 -113 -479 -68 -49 -130 -66 -274 -72 l-128 -6 0 345 c0 190 3
                                373 6 407 l7 61 117 0 c89 0 133 -5 181 -20z"
                            />
                            <path
                                class="path"
                                d="M9025 2080 c-216 -30 -387 -118 -531 -273 -165 -177 -244 -406 -244
                                -706 0 -310 79 -535 253 -717 123 -131 273 -212 456 -249 102 -21 312 -16 406
                                10 96 26 253 108 331 173 169 142 279 355 315 611 15 106 7 339 -16 446 -72
                                343 -309 599 -630 680 -105 27 -252 38 -340 25z m207 -101 c187 -40 279 -178
                                324 -486 24 -165 25 -608 1 -779 -50 -357 -166 -496 -417 -498 -192 -1 -303
                                75 -372 257 -73 191 -98 673 -52 1023 22 175 68 302 135 379 82 93 236 135
                                381 104z"
                            />
                            <path
                                class="path"
                                d="M12830 2079 c-163 -20 -326 -76 -445 -154 -96 -62 -223 -197 -278
                                -295 -56 -100 -100 -232 -117 -349 -16 -109 -8 -362 15 -456 84 -351 319 -588
                                670 -676 162 -41 437 -36 617 11 83 22 217 75 236 93 8 9 14 74 19 215 l6 202
                                -44 0 -45 0 -58 -142 c-74 -182 -110 -239 -170 -268 -195 -94 -452 -53 -601
                                96 -58 57 -122 174 -154 279 -68 219 -76 601 -20 850 30 133 103 278 177 352
                                106 105 248 159 402 151 69 -3 98 -10 144 -32 67 -33 90 -64 196 -264 l65
                                -122 44 0 44 0 -6 122 c-4 66 -7 152 -7 190 l0 69 -65 29 c-82 37 -204 75
                                -280 89 -91 15 -261 21 -345 10z"
                            />
                            <path
                                d="M6430 2001 c0 -37 2 -39 44 -51 56 -15 82 -40 95 -87 14 -48 14
                                -1471 1 -1528 -11 -47 -38 -72 -97 -88 -40 -10 -43 -14 -43 -44 l0 -33 345 0
                                345 0 0 34 c0 31 -3 34 -45 46 -68 19 -92 54 -100 142 -3 40 -5 219 -3 397 l3
                                325 165 -230 c91 -126 218 -302 283 -392 140 -197 147 -222 62 -249 -24 -8
                                -31 -16 -33 -41 l-3 -32 361 0 361 0 -3 32 c-3 27 -9 33 -48 47 -70 24 -114
                                56 -158 114 -23 29 -183 255 -355 502 l-315 449 272 278 c149 153 288 290 308
                                304 20 14 69 36 110 49 72 23 73 24 76 59 l3 36 -231 0 -231 0 3 -37 c3 -31 8
                                -38 35 -47 52 -18 68 -39 54 -73 -7 -15 -172 -190 -367 -388 l-354 -360 2 365
                                c3 424 2 415 90 448 49 18 53 22 56 56 l3 36 -345 0 -346 0 0 -39z"
                            />
                            <path
                                class="path"
                                d="M10132 2004 c3 -35 6 -38 51 -49 26 -7 57 -20 68 -31 48 -43 49 -50
                                49 -601 0 -315 4 -553 11 -608 48 -389 293 -595 710 -595 132 0 228 19 324 65
                                166 80 275 220 327 418 20 78 21 113 27 684 l6 603 26 26 c17 16 48 31 80 38
                                52 12 54 13 57 49 l3 37 -223 -2 -223 -3 -3 -32 c-3 -30 -1 -33 40 -43 69 -17
                                87 -28 108 -62 19 -32 20 -51 20 -609 0 -543 -1 -580 -20 -654 -24 -92 -52
                                -144 -111 -204 -140 -141 -422 -160 -587 -41 -86 62 -136 174 -152 338 -11
                                113 -13 646 -3 941 l6 204 29 32 c21 24 44 37 86 47 56 13 57 15 60 51 l3 37
                                -386 0 -386 0 3 -36z"
                            />
                            <path
                                class="path"
                                d="M13682 2004 c3 -33 7 -37 58 -57 96 -38 90 22 90 -845 0 -851 4 -804
                                -76 -841 -24 -12 -51 -21 -59 -21 -10 0 -15 -10 -15 -35 l0 -35 356 0 355 0
                                -3 32 c-3 27 -9 33 -44 45 -56 19 -86 53 -95 110 -4 27 -8 200 -8 386 l-1 337
                                350 0 350 0 0 -352 c0 -210 -4 -368 -10 -390 -12 -42 -56 -83 -100 -93 -26 -6
                                -30 -11 -30 -41 l0 -34 350 0 350 0 0 34 c0 28 -4 34 -27 39 -47 10 -93 46
                                -109 82 -20 50 -21 1499 0 1548 17 41 43 63 92 80 35 12 39 18 42 50 l3 37
                                -350 0 -351 0 0 -38 c0 -36 3 -40 38 -50 50 -15 79 -43 91 -89 7 -23 11 -169
                                11 -365 l0 -328 -350 0 -350 0 0 318 c1 174 5 337 9 361 10 51 43 87 97 106
                                35 11 39 17 42 49 l3 36 -356 0 -356 0 3 -36z"
                            />
                            <path
                                class="path"
                                d="M16360 2036 c0 -2 -130 -380 -290 -841 -191 -551 -299 -849 -315
                                -871 -30 -39 -63 -58 -128 -75 -44 -11 -47 -13 -47 -45 l0 -34 221 0 220 0 -3
                                31 c-3 27 -9 34 -53 50 -57 21 -85 50 -85 88 0 14 30 115 67 224 l67 197 309
                                -2 308 -3 64 -195 c36 -107 65 -207 65 -221 0 -38 -33 -75 -85 -95 -39 -14
                                -45 -21 -45 -45 l0 -29 365 0 365 0 0 29 c0 25 -5 31 -37 41 -61 20 -97 46
                                -121 88 -18 32 -240 674 -564 1625 l-30 87 -124 0 c-68 0 -124 -2 -124 -4z
                                m184 -1008 l54 -168 -275 0 c-216 0 -274 3 -270 13 2 6 62 179 132 382 70 204
                                132 381 138 395 10 26 32 -36 221 -622z"
                            />
                            <path
                                class="path"
                                d="M17450 2001 c0 -37 2 -39 44 -51 56 -15 82 -40 95 -87 14 -48 14
                                -1471 1 -1528 -11 -47 -38 -72 -97 -88 -40 -10 -43 -14 -43 -44 l0 -33 345 0
                                345 0 0 34 c0 31 -3 34 -45 46 -27 8 -55 25 -70 42 l-25 30 0 391 c0 215 4
                                387 8 382 13 -14 516 -715 536 -747 20 -31 18 -77 -4 -89 -8 -5 -27 -13 -42
                                -19 -22 -7 -28 -16 -28 -40 l0 -30 360 0 360 0 0 30 c0 20 -6 33 -17 36 -10 3
                                -46 19 -80 35 -78 37 -70 27 -466 594 l-315 449 267 273 c146 150 286 287 310
                                304 24 18 75 42 115 54 69 23 71 24 74 59 l3 36 -231 0 -231 0 3 -37 c3 -31 8
                                -38 33 -46 40 -13 65 -36 65 -59 0 -16 -477 -516 -674 -708 l-46 -44 0 362 c0
                                423 -2 411 85 438 54 17 55 18 55 56 l0 38 -345 0 -345 0 0 -39z"
                            />
                            <path
                                class="path"
                                d="M19272 2004 c3 -34 7 -38 56 -56 99 -37 92 30 92 -848 0 -878 7 -811
                                -92 -848 -47 -17 -53 -23 -56 -51 l-3 -31 361 0 361 0 -3 31 c-3 28 -9 34 -54
                                50 -98 37 -89 -47 -89 849 0 896 -9 812 89 849 47 17 51 21 54 55 l3 36 -361
                                0 -361 0 3 -36z"
                            />
                        </g>
                    </svg>

                    <!-- <h1 class="header-name">
                        <span class="first-name">Amir</span>
                        <span class="last-name"> Kouchaki</span>
                    </h1> -->
                </div>
                <nav class="main-nav desktop">
                    <a
                        class="link"
                        v-for="(link, idx) in navLinks"
                        :key="idx"
                        @click.prevent="link.click"
                        >{{ link.text }}</a
                    >
                </nav>
                <aside class="sidebar mobile">
                    <mobile-menu :links="navLinks"></mobile-menu>
                    <!-- <div class="sidebar-logo" @click="toggleSidebar"></div> -->
                </aside>
            </header>
            <section class="main-section">
                <section class="hero-section">
                    <div class="hero-img-container">
                        <img
                            src="../assets/images/profile.jpg"
                            alt=""
                            class="hero-img"
                            :style="imageStyle"
                        />
                    </div>
                    <div class="hero-info">
                        <p class="hero-short-intro">Fullstack Web Developer</p>
                        <h2 class="hero-name">Amir Kouchaki</h2>
                        <p class="hero-description">
                            Software Engineering major in Guilan University.
                            Experienced in Laravel and php with a good
                            understanding of MySQL , HTML , CSS , Vue ,
                            Javascript. Enthusiastic to learn new
                            frameworks,languages or patterns.
                        </p>
                        <div class="hero-btns">
                            <button class="hero-cv-btn hero-btn">
                                Download CV</button
                            ><button class="hero-btn hero-contact-btn">
                                Contact
                            </button>
                        </div>
                    </div>
                </section>
                <generic-section title="What I Do">
                    <div class="job-descriptions">
                        <section
                            class="job-description-section"
                            v-for="jobDescription in jobDescriptions"
                            :key="jobDescription.id"
                        >
                            <div
                                class="job-description-logo"
                                :style="` -webkit-mask: url(${publicPath(
                                    jobDescription.logo
                                )}) no-repeat center; mask: url(${publicPath(
                                    jobDescription.logo
                                )}) no-repeat center;`"
                            ></div>
                            <div class="job-description-info">
                                <h3 class="job-description-heading">
                                    {{ jobDescription.title }}
                                </h3>
                                <p class="job-description">
                                    {{ jobDescription.description }}
                                </p>
                            </div>
                        </section>
                    </div>
                </generic-section>
                <generic-section title="Technologies I Use">
                    <div class="carousel-wrapper" ref="carouselWrapper">
                        <carousel></carousel>
                    </div>
                </generic-section>

                <generic-section title="Fun Facts">
                    <div class="fact-cards">
                        <fact-card
                            v-for="funFact in funFacts"
                            :key="funFact.id"
                            :funFact="funFact"
                        />
                    </div>
                </generic-section>
            </section>
            <section class="resume-footer">
                <nav class="footer-nav">
                    <a target="_blank" href="https://github.com/amirKouchaki"
                        >Github</a
                    >
                    <a target="_blank" href="https://t.me/amir3409">Telegram</a>
                    <a href="mailto:amirkouchaki1@gmail.com">Email</a>
                </nav>
                <p class="copywrite">
                    The design idea belongs to
                    <a
                        target="_blank"
                        href="https://lmpixels.com/wp/leven-wp/dark/"
                    >
                        Impixels.com
                    </a>
                </p>
            </section>
        </div>
        <div class="back resume-back" ref="backOfResumeRef">
            <p>
                Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Nostrum ratione quia iure quas excepturi natus enim dignissimos
                earum sapiente voluptate, repellat rem cumque aspernatur minus
                ex facilis eligendi quae at!
            </p>
            <button
                @click="flipCard"
                style="text-align: center; margin-inline: auto"
            >
                go back
            </button>
        </div>
    </div>

    <message-thread-modal />
    <show-message-thread-modal />
    <auth-modal />
</template>

<script setup>
import { publicPath } from "../composables/publicUrl";
import GenericSection from "../components/resume/GenericSection.vue";
import Carousel from "../components/Carousel.vue";
import FactCard from "../components/resume/FactCard.vue";
import MessageThreadModal from "../components/modals/MessageThreadModal.vue";
import ShowMessageThreadModal from "../components/modals/ShowMessageThreadModal.vue";
import useModals from "../stores/modals";
import AuthModal from "../components/modals/AuthModal.vue";
import MobileMenu from "../components/MobileMenu.vue";
import { onMounted, reactive, ref } from "vue";
import { useRouter } from "vue-router";
import axiosClient from "../../axios";
import anime from "animejs/lib/anime.es.js";
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
const carouselWrapper = ref();
const frontOfResumeRef = ref();
const backOfResumeRef = ref();
const tl = ref();
const cardIsFlipped = ref(false);

onMounted(() => {
    anime({
        targets: "path",
        strokeDashoffset: [anime.setDashoffset, 0],
        easing: "easeInOutSine",
        duration: 2000,
        direction: "alternate",
        loop: false,
        delay: function (el, i) {
            return i * 100;
        },
    });
    anime({
        targets: "path",
        fill: "#4e54c8",
        easing: "easeOutBack",
        duration: 3500,
        loop: false,
        delay: function (el, i) {
            return i * 190;
        },
    });

    gsap.registerPlugin(ScrollTrigger);

    gsap.from(".hero-info", {
        duration: 1,
        opacity: 0,
        y: "-50px",
        ease: "sine.out",
    });

    gsap.from(".hero-img-container", {
        duration: 0.7,
        opacity: 0,
        delay: 0.8,
        ease: "sine.inOut",
    });

    gsap.from(".generic-heading", {
        duration: 1,
        opacity: 0,
        ease: "ease.inOut",
        stagger: 0.3,
    });
    gsap.from(".job-description-section > *", {
        duration: 1,
        opacity: 0,
        x: "-20px",
        ease: "ease.inOut",
        stagger: 0.2,
    });
    gsap.from(carouselWrapper.value, {
        duration: 1,
        opacity: 0,
        scrollTrigger: {
            trigger: carouselWrapper.value,
            start: "top 95%",
        },
        x: "-20px",
        ease: "ease.inOut",
        stagger: 0.3,
    });
    gsap.from(".fact-cards > *", {
        duration: 1,
        opacity: 0,
        scrollTrigger: {
            trigger: ".fact-cards > *",
            start: "top 97%",
        },
        x: "-20px",
        ease: "ease.inOut",
        stagger: 0.3,
    });
    tl.value = gsap
        .timeline({ paused: true })
        .to(".front", { duration: 1, rotationY: 180, ease: "ease.inOut" }, 0)
        .to(".back", { duration: 1, rotationY: 360, ease: "ease.inOut" }, 0);
});

const router = useRouter();
const modals = useModals();

const showSidebar = ref(false);

const jobDescriptions = [
    {
        id: 1,
        logo: "svgs/pencil.svg",
        title: "Backend",
        description:
            "Development of rest or stateful APIs to add the desired functionality to your website's design using Latest version of php with Laravel .",
    },
    {
        id: 2,
        logo: "svgs/shop.svg",
        title: "Deployment",
        description:
            "Deploying and configuring your website on vps , linux host ( cpanel , directAdmin )  from scratch using nginx. Deploying your fullstack website on your custom domain with required subdomains . ",
    },
    {
        id: 3,
        logo: "svgs/monitor.svg",
        title: "Frontend",
        description:
            "Customer-oriented development and conversion of the desired UI/UX to HTML,CSS,SCSS,Javascript and connecting it to The backend and server .",
    },
    {
        id: 4,
        logo: "svgs/megaphone.svg",
        title: "TDD",
        description:
            "Writing tests using phpunit before implementing the features so when anyone needs to refactor the code, the tests will fail if anything goes wrong so you can add features or change features much faster .",
    },
];

const funFacts = [
    {
        id: 1,
        logo: "svgs/heart.svg",
        title: "Projects",
        data: 7,
    },
    {
        id: 2,
        logo: "svgs/clock.svg",
        title: "Working Hours",
        data: 780,
    },
    {
        id: 3,
        logo: "svgs/star.svg",
        title: "Days Since Started",
        data: 449,
    },
    {
        id: 4,
        logo: "svgs/mug.svg",
        title: "Coffee Consumed",
        data: 1286,
    },
];

const flipCard = () => {
    cardIsFlipped.value = !cardIsFlipped.value;
    if (cardIsFlipped.value) tl.value.play();
    else tl.value.reverse();
};

const navLinks = [
    {
        text: "About Me",
        click: (e) => {
            flipCard();
        },
    },
    {
        text: "Resume",
        click: async () => {
            const res = await axiosClient.get("/api/resumes", {
                responseType: "blob",
            });
            const url = window.URL.createObjectURL(new Blob([res.data]));
            const link = document.createElement("a");
            link.href = url;
            link.setAttribute("download", "resume.pdf");
            document.body.appendChild(link);
            link.click();
        },
    },
    // {
    //     text: "Find Message",
    //     click: modals.toggleSearchMessageModal,
    // },
    // {
    //     text: "Blog",
    //     click: "",
    // },
    // {
    //     text: "Contact",
    //     click: modals.toggleMessageModal,
    // },
    // {
    //     text: "Login -- Sign Up",
    //     click: modals.toggleAuthModal,
    // },
];

const imageStyle = ref("");

let timeoutId = null;
let lastMouseX = null;
let lastMouseY = null;

const handleMouseMove = (event) => {
    const { clientX, clientY } = event;

    if (clientX !== lastMouseX || clientY !== lastMouseY) {
        lastMouseX = clientX;
        lastMouseY = clientY;

        clearTimeout(timeoutId);

        imageStyle.value = `
      transform: translate(${calculateOffsetX()}px, ${calculateOffsetY()}px);
    `;

        timeoutId = setTimeout(() => {
            imageStyle.value = "";
        }, 500); // Adjust the timeout duration as needed
    }
};

const calculateOffsetX = () => {
    const container = document.querySelector(".container");
    const containerRect = container.getBoundingClientRect();
    const offsetX = (lastMouseX - containerRect.left) / containerRect.width;
    const maxOffset = 10;
    const offsetXRange = offsetX * maxOffset - maxOffset / 2;
    return -offsetXRange;
};

const calculateOffsetY = () => {
    const container = document.querySelector(".container");
    const containerRect = container.getBoundingClientRect();
    const offsetY = (lastMouseY - containerRect.top) / containerRect.height;
    const maxOffset = 10;
    const offsetYRange = offsetY * maxOffset - maxOffset / 2;
    return -offsetYRange;
};
</script>

<style lang="scss" scoped>
@use "../abstracts" as *;

.front,
.back {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
    -ms-backface-visibility: hidden;
    grid-area: 1/1/2/2;
    background-color: $main-bg-color;
    border-radius: 3em;
}

.back {
    transform: rotateY(180deg);
}

.front {
    transform: rotateY(0deg);
}

.flipper {
    perspective: 6600px;
    transform-style: preserve-3d;
    display: grid;
    grid-template-rows: 1fr;
    padding: 2em;
    margin-block: 4.2em;
}

.main-section {
    position: relative;
    padding: 2em $container-inline-padding;
}

.resume-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 3em $container-inline-padding;
}

.resume-back {
    padding: 3em $container-inline-padding;
}

.header-profile-info {
    display: flex;
    align-items: center;
    gap: 0.5em;
}

.header-name {
    font-weight: bold;
    font-size: 1.6em;
    .last-name {
        font-weight: normal;
    }
}

.alphabet-profile {
    // width: 50px;
    // border-radius: 9999px;
    // scale: 0.9;
}

.main-nav {
    display: flex;
    gap: clamp(1.5em, 1em + 1vw, 2.7em);
    font-size: 1.15rem;
}

.hero-section {
    display: flex;
    gap: 5em;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    padding-block: 4em 5em;

    .hero-info {
        max-width: 70ch;
    }
}

.hero-img {
    max-width: 350px;
    min-width: 330px;
    transition: transform 0.2s ease-out;
    transform-origin: center center;
    -webkit-user-drag: none;
    user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
}

.hero-img-container {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    max-width: 360px;
    max-width: 340px;
    aspect-ratio: 1;
    border-radius: 999px;
    object-position: center;
    overflow: hidden;
    box-shadow: 0 0 23px 0 rgba(0, 0, 0, 0.7);
    border: 16px solid $hero-border-color;
}

.hero-short-intro {
    color: $secondary-text-color;
    font-size: 1.25rem;
}

.hero-name {
    font-size: 3.4rem;
    font-weight: bolder;
}

.hero-description {
    color: $long-text-color;
    padding-block: 1.7em;
    font-size: 1.3rem;
}

.hero-btns {
    display: flex;
    gap: 0.7em;
    font-size: 1.3rem;
}

.hero-btn {
    background-color: $secondary-bg-color;
    color: $main-text-color;
    $border-color: $secondary-button-border-color;
    border: 2px solid $border-color;
    padding: 0.45em 1.4em;
    border-radius: 1.2em;
    transition: all 450ms ease-in-out;
    &:hover,
    &:focus {
        background-color: $border-color;
        color: $o-main-text-color;

        outline: none;
    }
}

.hero-cv-btn {
    $border-color: $main-button-border-color;
    border: 2px solid $border-color;
    user-select: none;
    &:hover,
    &:focus {
        background-color: $border-color;
    }
}

.sidebar-logo {
    background-color: $main-text-color;
    -webkit-mask: url(svgs/menu-bars.svg) no-repeat center;
    mask: url(/svgs/menu-bars.svg) no-repeat center;
    width: 22px;
    height: 22px;
    cursor: pointer;
}

.mobile {
    display: none;
}

.job-descriptions {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5em;
}

.job-description-section {
    display: flex;
    gap: 1em;
}

.job-description-heading {
    margin-bottom: 0.3em;
    font-size: 1.3rem;
    font-weight: bold;
}

.job-description-logo {
    flex-grow: 1;
    background-color: $main-color;

    width: 25px;
    height: 25px;
    cursor: pointer;
}

.job-description-info {
    flex: 17;
    font-size: 1.1rem;
}

.fact-cards {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5em;
}

.resume-footer {
    padding-inline: $container-inline-padding;
    display: flex;
    justify-content: space-between;
    padding-block: 1em;
    font-size: 1.1rem;
    background-color: transparent;
    border-top: 2px solid $footer-border-color;
}

.footer-nav {
    display: flex;
    gap: 1.5em;
}

.copywrite {
    display: flex;
    gap: 0.2em;
}

.link {
    transition: all 0.3s ease-in-out;
}

@media (max-width: $sm-screen) {
    .resume-footer {
        flex-direction: column;
        gap: 0.7em;
    }

    .footer-nav,
    .copywrite {
        justify-content: center;
    }
}

@media (max-width: $sm-to-md-screen) {
    .resume-footer {
        flex-direction: column;
        align-items: center;
        gap: 1em;
    }

    .fact-cards {
        display: flex;
        flex-direction: column;
    }

    .job-descriptions {
        grid-template-columns: 1fr;
    }
}

@media (max-width: $md-screen) {
    .desktop {
        display: none;
    }

    .mobile {
        display: inherit;
    }

    .alphabet-profile {
        width: 30px;
    }
    .hero-info {
        text-align: center;
    }

    .hero-btns {
        justify-content: center;
    }

    .hero-img {
        max-width: unset;
        width: clamp(200px, 100px + 30vw, 275px);
    }

    .hero-description {
        width: 100%;
    }
}

@media (max-width: $lg-screen) {
    .fact-cards {
        grid-template-columns: repeat(2, 1fr);
    }
}
</style>
